{"ast":null,"code":"export default {\n  props: {\n    visible: Boolean,\n    prompt: String,\n    itemType: String,\n    level: {\n      type: Number,\n      default: 0\n    }\n  },\n  data() {\n    return {\n      itemName: \"\"\n    };\n  },\n  methods: {\n    confirmCreation() {\n      if (this.itemType === \"folder\") {\n        this.createFolder();\n      } else if (this.itemType === \"file\") {\n        this.createFile();\n      }\n      this.$emit(\"confirm\", this.itemName, this.itemType);\n      this.itemName = \"\";\n    },\n    createFolder() {\n      // Создание новой папки\n      const newFolder = {\n        type: \"folder\",\n        name: this.itemName,\n        lastModified: new Date().getTime(),\n        content: [],\n        newItemName: \"\"\n      };\n      if (newFolder.name.trim() === \"\") {\n        // Проверка на пустой ввод\n        newFolder.name = \"Новая папка\";\n      }\n      if (this.$store.state.expandedFolder.level + 1 < 7) {\n        newFolder.level = this.$store.state.expandedFolder.level + 1;\n        this.$emit(\"create\", newFolder);\n      }\n      if (this.$store.state.expandedFolder === null) {\n        newFolder.level = this.$store.state.expandedFolder.level + 1;\n        this.$emit(\"create\", newFolder);\n      }\n    },\n    createFile() {\n      this.$store.dispatch(\"createFileInRepository\", this.itemName);\n      this.$emit(\"create\", this.$store.state.newFile);\n    },\n    cancelCreation() {\n      this.$emit(\"cancel\");\n      this.itemName = \"\";\n    }\n  }\n};","map":{"version":3,"names":["props","visible","Boolean","prompt","String","itemType","level","type","Number","default","data","itemName","methods","confirmCreation","createFolder","createFile","$emit","newFolder","name","lastModified","Date","getTime","content","newItemName","trim","$store","state","expandedFolder","dispatch","newFile","cancelCreation"],"sources":["C:\\Users\\PC\\Desktop\\vue\\vue-code-collaborator\\src\\components\\CreateFileModal.vue"],"sourcesContent":["<template>\r\n  <div v-if=\"visible\" class=\"modal\">\r\n    <div class=\"modal-content\">\r\n      <p>{{ prompt }}</p>\r\n      <input\r\n        s\r\n        v-if=\"itemType !== 'file'\"\r\n        v-model=\"itemName\"\r\n        placeholder=\"Новая папка\"\r\n        @keyup.enter=\"confirmCreation\"\r\n      />\r\n      <input\r\n        v-else\r\n        v-model=\"itemName\"\r\n        placeholder=\"Новый файл.txt\"\r\n        @keyup.enter=\"confirmCreation\"\r\n      />\r\n      <button @click=\"confirmCreation\">Создать</button>\r\n      <button @click=\"cancelCreation\">Отмена</button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  props: {\r\n    visible: Boolean,\r\n    prompt: String,\r\n    itemType: String,\r\n    level: {\r\n      type: Number,\r\n      default: 0,\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      itemName: \"\",\r\n    };\r\n  },\r\n  methods: {\r\n    confirmCreation() {\r\n      if (this.itemType === \"folder\") {\r\n        this.createFolder();\r\n      } else if (this.itemType === \"file\") {\r\n        this.createFile();\r\n      }\r\n      this.$emit(\"confirm\", this.itemName, this.itemType);\r\n      this.itemName = \"\";\r\n    },\r\n    createFolder() {\r\n      // Создание новой папки\r\n      const newFolder = {\r\n        type: \"folder\",\r\n        name: this.itemName,\r\n        lastModified: new Date().getTime(),\r\n        content: [],\r\n        newItemName: \"\",\r\n        \r\n      };\r\n\r\n      if (newFolder.name.trim() === \"\") {\r\n        // Проверка на пустой ввод\r\n        newFolder.name = \"Новая папка\";\r\n      }\r\nif(this.$store.state.expandedFolder.level + 1 < 7){\r\n  newFolder.level = this.$store.state.expandedFolder.level + 1 \r\n  this.$emit(\"create\", newFolder);\r\n}\r\n     if(this.$store.state.expandedFolder === null){\r\n  newFolder.level = this.$store.state.expandedFolder.level + 1 \r\n  this.$emit(\"create\", newFolder);\r\n} \r\n    },\r\n    createFile() {\r\n      this.$store.dispatch(\"createFileInRepository\", this.itemName);\r\n\r\n      this.$emit(\"create\", this.$store.state.newFile);\r\n    },\r\n    cancelCreation() {\r\n      this.$emit(\"cancel\");\r\n      this.itemName = \"\";\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n.modal {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  background: rgba(0, 0, 0, 0.5);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  z-index: 999;\r\n}\r\n\r\n.modal-content {\r\n  background: white;\r\n  padding: 20px;\r\n  border-radius: 4px;\r\n  z-index: 999;\r\n}\r\n</style>\r\n"],"mappings":"AAwBA,eAAe;EACbA,KAAK,EAAE;IACLC,OAAO,EAAEC,OAAO;IAChBC,MAAM,EAAEC,MAAM;IACdC,QAAQ,EAAED,MAAM;IAChBE,KAAK,EAAE;MACLC,IAAI,EAAEC,MAAM;MACZC,OAAO,EAAE;IACX;EACF,CAAC;EACDC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,QAAQ,EAAE;IACZ,CAAC;EACH,CAAC;EACDC,OAAO,EAAE;IACPC,eAAeA,CAAA,EAAG;MAChB,IAAI,IAAI,CAACR,QAAO,KAAM,QAAQ,EAAE;QAC9B,IAAI,CAACS,YAAY,CAAC,CAAC;MACrB,OAAO,IAAI,IAAI,CAACT,QAAO,KAAM,MAAM,EAAE;QACnC,IAAI,CAACU,UAAU,CAAC,CAAC;MACnB;MACA,IAAI,CAACC,KAAK,CAAC,SAAS,EAAE,IAAI,CAACL,QAAQ,EAAE,IAAI,CAACN,QAAQ,CAAC;MACnD,IAAI,CAACM,QAAO,GAAI,EAAE;IACpB,CAAC;IACDG,YAAYA,CAAA,EAAG;MACb;MACA,MAAMG,SAAQ,GAAI;QAChBV,IAAI,EAAE,QAAQ;QACdW,IAAI,EAAE,IAAI,CAACP,QAAQ;QACnBQ,YAAY,EAAE,IAAIC,IAAI,CAAC,CAAC,CAACC,OAAO,CAAC,CAAC;QAClCC,OAAO,EAAE,EAAE;QACXC,WAAW,EAAE;MAEf,CAAC;MAED,IAAIN,SAAS,CAACC,IAAI,CAACM,IAAI,CAAC,MAAM,EAAE,EAAE;QAChC;QACAP,SAAS,CAACC,IAAG,GAAI,aAAa;MAChC;MACN,IAAG,IAAI,CAACO,MAAM,CAACC,KAAK,CAACC,cAAc,CAACrB,KAAI,GAAI,IAAI,CAAC,EAAC;QAChDW,SAAS,CAACX,KAAI,GAAI,IAAI,CAACmB,MAAM,CAACC,KAAK,CAACC,cAAc,CAACrB,KAAI,GAAI;QAC3D,IAAI,CAACU,KAAK,CAAC,QAAQ,EAAEC,SAAS,CAAC;MACjC;MACK,IAAG,IAAI,CAACQ,MAAM,CAACC,KAAK,CAACC,cAAa,KAAM,IAAI,EAAC;QAChDV,SAAS,CAACX,KAAI,GAAI,IAAI,CAACmB,MAAM,CAACC,KAAK,CAACC,cAAc,CAACrB,KAAI,GAAI;QAC3D,IAAI,CAACU,KAAK,CAAC,QAAQ,EAAEC,SAAS,CAAC;MACjC;IACI,CAAC;IACDF,UAAUA,CAAA,EAAG;MACX,IAAI,CAACU,MAAM,CAACG,QAAQ,CAAC,wBAAwB,EAAE,IAAI,CAACjB,QAAQ,CAAC;MAE7D,IAAI,CAACK,KAAK,CAAC,QAAQ,EAAE,IAAI,CAACS,MAAM,CAACC,KAAK,CAACG,OAAO,CAAC;IACjD,CAAC;IACDC,cAAcA,CAAA,EAAG;MACf,IAAI,CAACd,KAAK,CAAC,QAAQ,CAAC;MACpB,IAAI,CAACL,QAAO,GAAI,EAAE;IACpB;EACF;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}