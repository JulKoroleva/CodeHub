{"ast":null,"code":"import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, vShow as _vShow, withDirectives as _withDirectives, normalizeStyle as _normalizeStyle, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-60dbec27\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  key: 0,\n  class: \"code-editor__container\"\n};\nconst _hoisted_2 = {\n  style: {\n    \"margin\": \"0\"\n  }\n};\nconst _hoisted_3 = [\"disabled\"];\nconst _hoisted_4 = {\n  key: 1\n};\nconst _hoisted_5 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"p\", null, \"No file selected\", -1));\nconst _hoisted_6 = [_hoisted_5];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_Codemirror = _resolveComponent(\"Codemirror\");\n  return _openBlock(), _createElementBlock(\"div\", null, [_ctx.$store.state.selectedFile ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"h3\", _hoisted_2, _toDisplayString(_ctx.$store.state.selectedFile ? _ctx.$store.state.selectedFile.name : \"\") + _toDisplayString($data.isFileChanged ? \"*\" : \"\"), 1), _createVNode(_component_Codemirror, {\n    value: $data.textarea,\n    \"onUpdate:value\": _cache[0] || (_cache[0] = $event => $data.textarea = $event),\n    options: $setup.cmOptions,\n    placeholder: \"test placeholder\",\n    height: 600,\n    onInput: $options.change\n  }, null, 8, [\"value\", \"options\", \"onInput\"]), _createElementVNode(\"div\", {\n    class: \"code-editor__save-btn\",\n    style: _normalizeStyle({\n      opacity: $data.isFileChanged ? 1 : 0.5\n    })\n  }, [_withDirectives(_createElementVNode(\"button\", {\n    onClick: _cache[1] || (_cache[1] = (...args) => $options.saveFileContent && $options.saveFileContent(...args)),\n    disabled: !_ctx.$store.state.selectedFile,\n    style: {\n      \"width\": \"100%\",\n      \"background-color\": \"transparent\",\n      \"border\": \"none\"\n    }\n  }, \" SAVE \", 8, _hoisted_3), [[_vShow, this.$store.state.selectedFile]])], 4)])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_4, _hoisted_6))]);\n}","map":{"version":3,"names":["class","style","_createElementVNode","_hoisted_5","_createElementBlock","_ctx","$store","state","selectedFile","_hoisted_1","_hoisted_2","_toDisplayString","name","$data","isFileChanged","_createVNode","_component_Codemirror","value","textarea","$event","options","$setup","cmOptions","placeholder","height","onInput","$options","change","_normalizeStyle","opacity","onClick","_cache","args","saveFileContent","disabled","_hoisted_3","_hoisted_4","_hoisted_6"],"sources":["C:\\Users\\PC\\Desktop\\vue\\vue-code-collaborator\\src\\components\\CodeEditor.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <div v-if=\"$store.state.selectedFile\" class=\"code-editor__container\">\r\n      <h3 style=\"margin: 0\">\r\n        {{ $store.state.selectedFile ? $store.state.selectedFile.name : \"\"\r\n        }}{{ isFileChanged ? \"*\" : \"\" }}\r\n      </h3>\r\n      <Codemirror\r\n        v-model:value=\"textarea\"\r\n        :options=\"cmOptions\"\r\n        placeholder=\"test placeholder\"\r\n        :height=\"600\"\r\n        @input=\"change\"\r\n      />\r\n      <div\r\n        class=\"code-editor__save-btn\"\r\n        :style=\"{ opacity: isFileChanged ? 1 : 0.5 }\"\r\n      >\r\n        <button\r\n          v-show=\"this.$store.state.selectedFile\"\r\n          @click=\"saveFileContent\"\r\n          :disabled=\"!$store.state.selectedFile\"\r\n          style=\"width: 100%; background-color: transparent; border: none\"\r\n        >\r\n          SAVE\r\n        </button>\r\n      </div>\r\n    </div>\r\n    <div v-else>\r\n      <p>No file selected</p>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Codemirror from \"codemirror-editor-vue3\";\r\n// placeholder\r\nimport \"codemirror/addon/display/placeholder.js\";\r\n// language\r\nimport \"codemirror/mode/javascript/javascript.js\";\r\n// placeholder\r\nimport \"codemirror/addon/display/placeholder.js\";\r\n// theme\r\nimport \"codemirror/theme/dracula.css\";\r\n\r\n\r\nimport { ref } from \"vue\";\r\nexport default {\r\n  components: { Codemirror },\r\n  setup() {\r\n    const code = ref(`\r\nvar i = 0;\r\nfor (; i < 9; i++) {\r\n  console.log(i);\r\n  // more statements\r\n}`);\r\n\r\n    return {\r\n      code,\r\n      cmOptions: {\r\n        mode: \"text/javascript\", // Language mode\r\n        theme: \"dracula\", // Theme\r\n      },\r\n    };\r\n  },\r\n  props: {\r\n    selectedRepository: Array,\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      textarea: \"\",\r\n      isFileChanged: false,\r\n    };\r\n  },\r\n  watch: {\r\n    \"$store.state.selectedFile\": function (newFile) {\r\n      if (newFile && newFile.type === \"text/plain\") {\r\n        this.textarea = newFile.content || \"\"; \r\n      }\r\n    },\r\n  },\r\n  methods: {\r\n    loadFileContent(file) {\r\n      if (file && file.type === \"text/plain\") {\r\n        const codeMirrorInstance = CodeMirror(this.$refs.codeMirror, {\r\n          value: file.content || \"\",\r\n          mode: \"text/plain\", \r\n          lineNumbers: true, \r\n        });\r\n\r\n        codeMirrorInstance.on(\"change\", (editor) => {\r\n          this.$store.commit(\"updateFileContent\", editor.getValue());\r\n        });\r\n      }\r\n    },\r\n    saveFileContent() {\r\n      this.$store.commit(\"updateFileContent\", this.textarea);\r\n      this.isFileChanged = false;\r\n    },\r\n\r\n    change(newValue) {\r\n      this.$store.commit(\"updateFileContent\", newValue);\r\n      this.isFileChanged = true;\r\n    },\r\n  },\r\n  computed: {\r\n    selectedFile() {\r\n      if (this.selectedRepository && this.selectedRepository.files) {\r\n        return this.selectedRepository.files.find(\r\n          (file) => file === this.$store.state.selectedFile\r\n        );\r\n      }\r\n      return null;\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.code-editor__container {\r\n  width: 71vw;\r\n  min-height: 70vh;\r\n  text-align: left;\r\n  margin-right: 10px;\r\n}\r\n.CodeMirror-code {\r\n  text-align: left;\r\n}\r\n\r\n.codemirror-container {\r\n  border-radius: 4px;\r\n}\r\n\r\n.code-editor__save-btn {\r\n  width: 100%;\r\n  background-color: #bfbfbf;\r\n  border-radius: 4px;\r\n}\r\n</style>"],"mappings":";;;;EAE0CA,KAAK,EAAC;;;EACtCC,KAAiB,EAAjB;IAAA;EAAA;AAAiB;;;;;gEA0BrBC,mBAAA,CAAuB,WAApB,kBAAgB;oBAAnBC,UAAuB,C;;;uBA5B3BC,mBAAA,CA8BM,cA7BOC,IAAA,CAAAC,MAAM,CAACC,KAAK,CAACC,YAAY,I,cAApCJ,mBAAA,CAyBM,OAzBNK,UAyBM,GAxBJP,mBAAA,CAGK,MAHLQ,UAGK,EAAAC,gBAAA,CAFAN,IAAA,CAAAC,MAAM,CAACC,KAAK,CAACC,YAAY,GAAGH,IAAA,CAAAC,MAAM,CAACC,KAAK,CAACC,YAAY,CAACI,IAAI,SAAAD,gBAAA,CACxDE,KAAA,CAAAC,aAAa,kBAEpBC,YAAA,CAMEC,qBAAA;IALQC,KAAK,EAAEJ,KAAA,CAAAK,QAAQ;0DAARL,KAAA,CAAAK,QAAQ,GAAAC,MAAA;IACtBC,OAAO,EAAEC,MAAA,CAAAC,SAAS;IACnBC,WAAW,EAAC,kBAAkB;IAC7BC,MAAM,EAAE,GAAG;IACXC,OAAK,EAAEC,QAAA,CAAAC;gDAEVzB,mBAAA,CAYM;IAXJF,KAAK,EAAC,uBAAuB;IAC5BC,KAAK,EAAA2B,eAAA;MAAAC,OAAA,EAAahB,KAAA,CAAAC,aAAa;IAAA;sBAEhCZ,mBAAA,CAOS;IALN4B,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEN,QAAA,CAAAO,eAAA,IAAAP,QAAA,CAAAO,eAAA,IAAAD,IAAA,CAAe;IACtBE,QAAQ,GAAG7B,IAAA,CAAAC,MAAM,CAACC,KAAK,CAACC,YAAY;IACrCP,KAAgE,EAAhE;MAAA;MAAA;MAAA;IAAA;KACD,QAED,KAAAkC,UAAA,I,cANe7B,MAAM,CAACC,KAAK,CAACC,YAAY,E,2BAS5CJ,mBAAA,CAEM,OAAAgC,UAAA,EAAAC,UAAA,G"},"metadata":{},"sourceType":"module","externalDependencies":[]}